/*

In this file:

// A. Modules
// B. Quiz Selectors

*/

//////////////////////////////////////////////
// A. Modules
//////////////////////////////////////////////

@use "sass:map";
@use "../icons/theme" as icons;
@use "../accents/style" as accents;

//////////////////////////////////////////////
// B. Quiz Block
//////////////////////////////////////////////

.quiz {
    overflow: hidden;
    
    button[type="submit"]{
        background-color: var(--white-link);
        color: white !important;
    }
}

ol.quiz__questions {
    list-style: none;
    counter-reset: section;

    .form-entry__field__label {
        display: flex;
        padding: unset;
        padding-left: calc( var(--form-field-padding-x) + 2em);

        &::before {
            counter-increment: section;                   
            content: counter(section) ".";
            position: absolute;
            left: 0;
            padding-left: var(--form-field-padding-x);
        }
    }

}

.quiz__questions {

    .form-entry__option__radio > label > input ~ .radio__label::before {
        @extend .vl-icon_font;
    }

    .form-entry__option__radio:nth-child(1) > label > input ~ .radio__label::before {
        content: "\e900";
    }

    .form-entry__option__radio:nth-child(2) > label > input ~ .radio__label::before {
        content: "\e901";
    }

    .form-entry__option__radio:nth-child(3) > label > input ~ .radio__label::before {
        content: "\e902";
    }

    .form-entry__option__radio:nth-child(4) > label > input ~ .radio__label::before {
        content: "\e903";
    }

    .form-entry__option__radio:nth-child(5) > label > input ~ .radio__label::before {
        content: "\e904";
    }

    .form-entry__option__radio > label > input:checked ~ .radio__label::before {
        content: "\e905";
    }

    .form-entry__option__radio > label > input:not(:checked) ~ .radio__label::before {
        opacity: 1;
        color: var(--white-link);
    }

}

.quiz__image {
    overflow: hidden;
    border-radius: var(--form-field-border-radius);
    margin-bottom: var(--spacer-3);
}

.quiz__response {
    display: none;
    margin-top: var(--form-field-padding-y);
    padding-left: calc(1.25em + var(--form-field-padding-x));
    
    font-style: italic;
    font-size: 90%;

    // display: block;

    color: var(--white-warn);

    [data-answer="correct"] & {
        color: var(--white-confirm);
    }

}

.quiz__score {
    position: relative;
    padding: var(--spacer-2);

    p {
        margin-bottom: 0.25em;
    }

    &::before {
        position: absolute;
        content: "";

        top: 0;
        right: 0;
        bottom: 0;
        left: 0;

        border-radius: inherit;
        pointer-events: none;

        background-color: currentColor;
        opacity: 0.1;    
    }

    &.passed {
        color: var(--white-confirm);
    }

    display: none;
}

//

.comprehension-checkpoint__header {
    border-radius: var(--form-field-border-radius, 0.25em);
    overflow: hidden;

    @extend %subtle-fill-psuedo;
    --subtle-fill-opacity: 0.075;

    display: flex;
    align-items: center;

    color: var(--primary);

    margin-left: calc(var(--button--icon-only-size) * -1);

    > span {
        @extend %subtle-fill-psuedo;
        --subtle-fill-opacity: 0.075;
        display: flex;
        align-items: center;
        justify-content: center;
        
        width: var(--button--icon-only-size);
        height: var(--button--icon-only-size);


        margin-right: 0.5em;
    }

    > span > [class*="icon"] {
        font-size: 1.5em;
    }

}