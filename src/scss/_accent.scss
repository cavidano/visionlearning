/*

In this file:

// A. Modules
// B. Variables
// C. Placeholders
// D. Utilities

*/

////////////////////////////////////////
// A. Modules
////////////////////////////////////////

@use 'sass:map';
@use './breakpoint';

////////////////////////////////////////
// B. Variables
////////////////////////////////////////

// Scoped to Root

:root {
    --subtle-fill-opacity: 0.05;
}

// Scoped to Block

%caret-vars {
    --caret-size: 0.25em;

    --caret-margin: 0.375em;
}

%gradient-veneer-vars {
    --gradient-veneer-start: 50%;

    --gradient-veneer-opacity: 1;
}

////////////////////////////////////////
// C. Placeholders
////////////////////////////////////////

%subtle-fill-psuedo {
    position: relative;

    &::before {
        position: absolute;
        content: "";
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;   

        border-radius: inherit;

        pointer-events: none;

        background-color: currentColor;
        
        opacity: var(--subtle-fill-opacity);  
        
        z-index: 0;  
    }
    
}

%caret {
    @extend %caret-vars;
    
    display: inline-flex;
    flex-direction: row-reverse;
    align-items: center;
    
    &::before {
        border-top: var(--caret-size) solid;
        border-right: var(--caret-size) solid transparent;
        border-bottom: 0;
        border-left: var(--caret-size) solid transparent;

        position: relative;
        content: "";
        
        display: inline-flex;
        
        margin-inline-start: var(--caret-margin);
        
        color: inherit;
        
        pointer-events: none;
    }
}

////////////////////////////////////////
// D. Utilities
////////////////////////////////////////

@layer utility {

    // Subtle Fill Utility

    .subtle-fill {
        @extend %subtle-fill-psuedo;
        
        > * {
            position: relative;
            z-index: auto;
        }
    }

    // Caret Utility

    .caret {
        @extend %caret;
    }

    // Gradient Veneer Utilities

    [class*="gradient-veneer"] {
        @extend %gradient-veneer-vars;

        --gradient-direction: to bottom;
        
        position: relative;

        z-index: 0;

        -webkit-mask-image: linear-gradient( var(--gradient-direction), black, var(--gradient-veneer-start), transparent);
        mask-image: linear-gradient( var(--gradient-direction), black, var(--gradient-veneer-start), transparent);
    }

    [class*="gradient-veneer-top"] {
        --gradient-direction: to top;
    }

    [class*="gradient-veneer-right"] {
        --gradient-direction: to right;
    }

    [class*="gradient-veneer-bottom"] {
        --gradient-direction: to bottom;
    }

    [class*="gradient-veneer-left"] {
        --gradient-direction: to left;
    }

    @each $breakpoint in map.keys(breakpoint.$breakpoints) {
        @include breakpoint.breakpoint-up($breakpoint) {
            $mod: breakpoint.breakpoint-modifier($breakpoint, breakpoint.$breakpoints);

            .gradient-veneer-top#{$mod},
            .gradient-veneer-right#{$mod},
            .gradient-veneer-bottom#{$mod},
            .gradient-veneer-left#{$mod} {
                &::after{
                    display: block;
                }
            }
            
        }
    }

} // end @layer