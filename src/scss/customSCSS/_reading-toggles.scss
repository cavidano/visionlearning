/*

In this file:

// A. Variables
// B. Components

*/

//////////////////////////////////////////////
// A. Modules
//////////////////////////////////////////////

@use '../breakpoint';

//////////////////////////////////////////////
// A. Variables
//////////////////////////////////////////////

:root {
    --ngss-sep-hue: 240;
    --ngss-sep-saturation: 75%;
    --ngss-sep-lightness: 30%;

    --ngss-cc-hue: 120;
    --ngss-cc-saturation: 60%;
    --ngss-cc-lightness: 40%;

    --ngss-dci-hue: 25;
    --ngss-dci-saturation: 75%;
    --ngss-dci-lightness: 50%;

    --term-highlight-hue: 123;
    --term-highlight-saturation:43%;
    --term-highlight-lightness:56%;
}

//////////////////////////////////////////////
// B. Components
//////////////////////////////////////////////

@layer component {

    mark.term,
    mark.ngss {
        color: currentColor;

        // Term Highlight
        --term-highlight-alpha: 0.375;
        --term-highlight: hsla(
            var(--term-highlight-hue),
            var(--term-highlight-saturation),
            var(--term-highlight-lightness),
            var(--term-highlight-alpha)
        );

        // Practices
        --ngss-sep-alpha: 0.2;
        --ngss-practices: hsla(
            var(--ngss-sep-hue),
            var(--ngss-sep-saturation),
            var(--ngss-sep-lightness),
            var(--ngss-sep-alpha)
        );

        // Crosscutting
        --ngss-cc-alpha: 0.2;
        --ngss-crosscutting: hsla(
            var(--ngss-cc-hue),
            var(--ngss-cc-saturation),
            var(--ngss-cc-lightness),
            var(--ngss-cc-alpha)
        );

        // Core Ideas
        --ngss-dci-alpha: 0.2;
        --ngss-core-ideas: hsla(
            var(--ngss-dci-hue),
            var(--ngss-dci-saturation),
            var(--ngss-dci-lightness),
            var(--ngss-dci-alpha)
        );

        padding-block: 0.075em;
        
        background-color: transparent;
        
        transition: background-color 0.125s;
        
        pointer-events: none;
    }

    mark.term.highlighted,
    mark.ngss.highlighted {
        cursor: pointer;

        pointer-events: auto;

        outline: solid var(--border-width) transparent;

    }

    mark.term.highlighted {

        outline-color:
            hsla(
                var(--term-highlight-hue),
                var(--term-highlight-saturation),
                var(--term-highlight-lightness),
                calc(var(--term-highlight-alpha)*2)
            );
        
        background-color: var(--term-highlight);

        &:hover, 
        &:focus {
            --term-highlight-alpha: 0.675;
        }
    }

    mark.ngss.highlighted {
        position: relative;
        
        &[data-ngss-cat-abbr*="SEP"] {
            outline-color:
                hsla(
                    var(--ngss-sep-hue),
                    var(--ngss-sep-saturation),
                    var(--ngss-sep-lightness),
                    calc(var(--ngss-sep-alpha)*2)
                );
            
            background-color: var(--ngss-practices);
        }

        &[data-ngss-cat-abbr*="CC"] {
            outline-color:
                hsla(
                    var(--ngss-cc-hue),
                    var(--ngss-cc-saturation),
                    var(--ngss-cc-lightness),
                    calc(var(--ngss-cc-alpha)*2)
                );
            
            background-color: var(--ngss-crosscutting);
        }

        &[data-ngss-cat-abbr*="DCI"] {
            outline-color:
                hsla(
                    var(--ngss-dci-hue),
                    var(--ngss-dci-saturation),
                    var(--ngss-dci-lightness),
                    calc(var(--ngss-dci-alpha)*2)
                );
            
            background-color: var(--ngss-core-ideas);
        }

        &::before {
            display: inline-flex;

            position: absolute;
            
            transform: translateY(-100%);
            
            margin-inline-start: calc(var(--border-width) * -1);

            padding: 0.5em 0.75em;
            
            font-size: 65%;
            font-style: italic;
            font-weight: 700;
            text-transform: uppercase;
            
            color: white;

            opacity: 0;

            transition: opacity 0.125s ease-in;

            content: attr(data-ngss-cat-abbr);

            white-space: nowrap;
        }
        
        &[data-ngss-cat-abbr*="SEP"]::before {
            background-color: hsl(
                var(--ngss-sep-hue) 
                var(--ngss-sep-saturation)
                var(--ngss-sep-lightness)
            );
        }

        &[data-ngss-cat-abbr*="CC"]::before {
            background-color: hsl(
                var(--ngss-cc-hue) 
                var(--ngss-cc-saturation)
                var(--ngss-cc-lightness)
            );
        }

        &[data-ngss-cat-abbr*="DCI"]::before {
            background-color: hsl(
                var(--ngss-dci-hue) 
                var(--ngss-dci-saturation)
                var(--ngss-dci-lightness)
            );
        }

        &:hover, 
        &:focus {
            --ngss-sep-alpha: 0.375;
            --ngss-cc-alpha: 0.375;
            --ngss-dci-alpha: 0.375;

            &::before {
                opacity: 1;
            }
        }

    }

    // Reading Toggle

    .reading-toggle {

        font-size: var(--font-size-md);

        [class*="__switch"] {
            border-top: var(--border-width) var(--border-style) var(--border-color);
            margin-block-start: var(--spacer-2);
            label {
            font-size: var(--font-size-lg);
                padding-block: var(--spacer-2);
            }        
        }

    }

    .reading-toggle-overlay,
    .reading-toggle-overlay::before {
        position: fixed;
        inset-block-start: 0;
        inset-inline-start: 0;

        width: 100%;
        height: 100%;
    }

    .reading-toggle-overlay {
        --lightbox-overlay-color: hsla(0, 0%, 100%, 0.875);

        display: flex;
        flex-direction: column;
        justify-content: center;
        align-content: center;
        
        padding: var(--lightbox-padding-y) var(--lightbox-padding-x);

        width: 100%;
        height: 100%;

        z-index: 10000;

        &::before {
            content: "";

            background-color: var(--lightbox-overlay-color);
            
            opacity: var(--lightbox-overlay-opacity);

            z-index: -1;
            
            pointer-events: none;
        }

    }

    .reading-toggle__detail {
        --padding-x: 1em;
        --padding-y: 0.75em;

        max-width: var(--narrow-width);

        margin-inline: auto;

        border-radius: 0.5em;

        &.shown {
            opacity: 1;
            transform: translateY(0);
        }

        &[data-term-definition]{
            background-color: hsl(
                var(--term-highlight-hue) 
                var(--term-highlight-saturation)
                var(--term-highlight-lightness)
            );

        }

        &[data-ngss-cat-abbr*="SEP"]{
            background-color: hsl(
                var(--ngss-sep-hue) 
                var(--ngss-sep-saturation)
                var(--ngss-sep-lightness)
            );
        }

        &[data-ngss-cat-abbr*="CC"]{
            background-color: hsl(
                var(--ngss-cc-hue) 
                var(--ngss-cc-saturation)
                var(--ngss-cc-lightness)
            );
        }

        &[data-ngss-cat-abbr*="DCI"]{
            background-color: hsl(
                var(--ngss-dci-hue) 
                var(--ngss-dci-saturation)
                var(--ngss-dci-lightness)
            );
        }

        &:not(.glossary-term) > [class*="__head"] {
            font-weight: var(--body-font-weight-bold);
            color: white;
        }

    }

    .reading-toggle__detail__head {
        display: flex;
        justify-content: space-between;
        align-items: center;

        padding-block: calc(var(--padding-y) * 0.5);
        padding-inline-start:  var(--padding-x);
        padding-inline-end: calc(var(--padding-y) * 0.5);

        .h6 {
            margin-block-end: unset;        
        }
    }

    .reading-toggle__detail__body {
        padding: var(--padding-y) var(--padding-x);
        background-color: hsla(100, 100%, 100%, 0.875);
    }

} // end @layer